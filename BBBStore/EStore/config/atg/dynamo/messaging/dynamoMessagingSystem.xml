<?xml version="1.0" ?>
<dynamo-message-system>
	<patchbay>
    <message-source>
      <nucleus-name>
        /com/bbb/framework/cache/BBBCachaInvalidatorMessageSource
      </nucleus-name>
      <output-port>
        <port-name>
          BBBDropletCacheMsgPort
        </port-name>
        <output-destination>
          <provider-name>
            sqldms
          </provider-name>
          <destination-name>
             sqldms:/BBBTopic/CacheFlushEvents
          </destination-name>
          <destination-type>
            Topic
          </destination-type>
        </output-destination>
      </output-port>
      <output-port>
        <port-name>
          BBBCollectionChildRelnCachePort
        </port-name>
        <output-destination>
          <provider-name>
            sqldms
          </provider-name>
          <destination-name>
             sqldms:/BBBTopic/CacheFlushEvents
          </destination-name>
          <destination-type>
            Topic
          </destination-type>
        </output-destination>
      </output-port>
      <output-port>
        <port-name>
          BBBCategoryRedirectURLCachePort
        </port-name>
        <output-destination>
          <provider-name>
            sqldms
          </provider-name>
          <destination-name>
             sqldms:/BBBTopic/CacheFlushEvents
          </destination-name>
          <destination-type>
            Topic
          </destination-type>
        </output-destination>
      </output-port>
      <output-port>
        <port-name>
          BBBCacheMsgPort
        </port-name>
        <output-destination>
          <provider-name>
            sqldms
          </provider-name>
          <destination-name>
             sqldms:/BBBTopic/CacheFlushEvents
          </destination-name>
          <destination-type>
            Topic
          </destination-type>
        </output-destination>
      </output-port>
      <output-port>
      	<port-name>
           BBBNearCacheMsgPort
        </port-name>
        <output-destination>
        	<provider-name>
                sqldms
            </provider-name>
            <destination-name>
                sqldms:/BBBTopic/NearCacheFlushEvent
            </destination-name>
            <destination-type>
                Topic
            </destination-type>
        </output-destination>
      </output-port>  
      <output-port>
      	<port-name>
           BBBNearMobileCacheMsgPort
        </port-name>
        <output-destination>
        	<provider-name>
                sqldms
            </provider-name>
            <destination-name>
                sqldms:/BBBTopic/NearMobileCacheFlushEvents
            </destination-name>
            <destination-type>
                Topic
            </destination-type>
        </output-destination>
      </output-port>     
        <output-port>
      	<port-name>
           BBBDynamicPriceCachePort
        </port-name>
        <output-destination>
        	<provider-name>
                sqldms
            </provider-name>
            <destination-name>
                sqldms:/BBBTopic/DynamicPriceCacheEvents
            </destination-name>
            <destination-type>
                Topic
            </destination-type>
        </output-destination>
      </output-port>  
 <output-port>
        <port-name>
          BBBICRepositoryMsgPort
        </port-name>
        <output-destination>
          <provider-name>
            sqldms
          </provider-name>
          <destination-name>
             sqldms:/BBBTopic/CacheFlushEvents
          </destination-name>
          <destination-type>
            Topic
          </destination-type>
        </output-destination>
      </output-port>
    </message-source>
		<message-sink>
			<nucleus-name>
				/com/bbb/framework/cache/BBBATGCacheContainer
			</nucleus-name>
	      <input-port>
	        <port-name>
	          BBBDropletCacheMsgPort
	        </port-name>
	        <input-destination>
	          <provider-name>
	            sqldms
	          </provider-name>
	          <destination-name>
	            sqldms:/BBBTopic/CacheFlushEvents
	          </destination-name>
	          <destination-type>
	            Topic
	          </destination-type>
	        </input-destination>
	      </input-port>
	    </message-sink>
	    <message-sink>
			<nucleus-name>
				/com/bbb/framework/cache/BBBLocalConfigCacheContainer
			</nucleus-name>
	      <input-port>
	        <port-name>
	          BBBCacheMsgPort
	        </port-name>
	        <input-destination>
	          <provider-name>
	            sqldms
	          </provider-name>
	          <destination-name>
	            sqldms:/BBBTopic/CacheFlushEvents
	          </destination-name>
	          <destination-type>
	            Topic
	          </destination-type>
	        </input-destination>
	      </input-port>
	    </message-sink>
	    <message-sink>
			<nucleus-name>
				/com/bbb/framework/cache/BBBCollectionChildRelnCacheRefreshListener
			</nucleus-name>
	      <input-port>
	        <port-name>
	          BBBCollectionChildRelnCachePort
	        </port-name>
	        <input-destination>
	          <provider-name>
	            sqldms
	          </provider-name>
	          <destination-name>
	            sqldms:/BBBTopic/CacheFlushEvents
	          </destination-name>
	          <destination-type>
	            Topic
	          </destination-type>
	        </input-destination>
	      </input-port>
	    </message-sink>
	    <message-sink>
			<nucleus-name>
				/com/bbb/framework/cache/BBBCategoryRedirectURLCacheContainer
			</nucleus-name>
	      <input-port>
	        <port-name>
	          BBBCategoryRedirectURLCachePort
	        </port-name>
	        <input-destination>
	          <provider-name>
	            sqldms
	          </provider-name>
	          <destination-name>
	            sqldms:/BBBTopic/CacheFlushEvents
	          </destination-name>
	          <destination-type>
	            Topic
	          </destination-type>
	        </input-destination>
	      </input-port>
	    </message-sink>
	    <message-sink>
			<nucleus-name>
				/com/bbb/framework/cache/BBBLocalLabelCacheContainer
			</nucleus-name>
	      <input-port>
	        <port-name>
	          BBBCacheMsgPort
	        </port-name>
	        <input-destination>
	          <provider-name>
	            sqldms
	          </provider-name>
	          <destination-name>
	            sqldms:/BBBTopic/CacheFlushEvents
	          </destination-name>
	          <destination-type>
	            Topic
	          </destination-type>
	        </input-destination>
	      </input-port>
	    </message-sink>
	    <message-sink>
	      <nucleus-name>
              /com/bbb/framework/cache/CoherenceCacheContainer
       	  </nucleus-name>
       	  <input-port>
       	    <port-name>
              BBBNearCacheMsgPort
            </port-name>
            <input-destination>
              <provider-name>
                  sqldms
              </provider-name>
              <destination-name>
              	sqldms:/BBBTopic/NearCacheFlushEvent
              </destination-name>
              <destination-type>
                Topic
              </destination-type>
            </input-destination>
          </input-port>
        </message-sink>
        <message-sink>
	      <nucleus-name>
              /com/bbb/framework/cache/MobileNearCacheInvalidator
       	  </nucleus-name>
       	  <input-port>
       	    <port-name>
              BBBNearMobileCacheMsgPort
            </port-name>
            <input-destination>
              <provider-name>
                  sqldms
              </provider-name>
              <destination-name>
              	sqldms:/BBBTopic/NearMobileCacheFlushEvents
              </destination-name>
              <destination-type>
                Topic
              </destination-type>
            </input-destination>
          </input-port>
        </message-sink>
        <message-sink>
			<nucleus-name>
				/com/bbb/cache/listener/BBBDynamicPriceCachingSink
			</nucleus-name>
	      <input-port>
	        <port-name>
	          BBBDynamicPriceCachePort
	        </port-name>
	        <input-destination>
	          <provider-name>
	            sqldms
	          </provider-name>
	          <destination-name>
	            sqldms:/BBBTopic/DynamicPriceCacheEvents
	          </destination-name>
	          <destination-type>
	            Topic
	          </destination-type>
	        </input-destination>
	      </input-port>
	    </message-sink>
	     <message-sink>
			<nucleus-name>
				/com/bbb/cache/listener/InteractiveRepositoryCache
			</nucleus-name>
	      <input-port>
	        <port-name>
	          BBBICRepositoryMsgPort
	        </port-name>
	        <input-destination>
	          <provider-name>
	            sqldms
	          </provider-name>
	          <destination-name>
	            sqldms:/BBBTopic/CacheFlushEvents
	          </destination-name>
	          <destination-type>
	            Topic
	          </destination-type>
	        </input-destination>
	      </input-port>
	    </message-sink>
	</patchbay>
	<!-- 
	<local-jms>
		<topic-name>
	      /BBBTopic/CacheFlushEvents
	    </topic-name>
	</local-jms>
	 -->	
	<message-registry>
		<message-family>
			<message-family-name>
				BBB
			</message-family-name>
			<message-type>
		        <jms-type>
		          bbb.droplet.CacheInvalidationMessage
		        </jms-type>
		        <message-class>
		          com.bbb.framework.cache.CacheInvalidationMessage
		        </message-class>
		        <display-name>
		         CacheInvalidationMessage
		        </display-name>
		        <description>
		         Droplet Cache Invalidation Message
		        </description> 
	       </message-type>
		</message-family>
	</message-registry>      
</dynamo-message-system>
