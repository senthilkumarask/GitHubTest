-- Build Version : PSI8 Release Sprint 0 to 12.1
SET ECHO ON;
SET DEFINE OFF;

--Sprint 2.1
ALTER TABLE BBB_CORE.BBB_DPS_USER ADD FORGOT_PWD_TOKEN VARCHAR2(254);	

--Sprint 3.1
ALTER TABLE BBB_CORE.BBB_REG_RECOMM_PRODUCTS ADD LTL_SHIP_METHOD VARCHAR2(10);

--Sprint 3.1
CREATE INDEX BBB_CORE.IDX_COUPON_RULES ON BBB_CORE.BBB_COUPON_RULES (ENTRY_CD, RULE_EVAL);

--Sprint 4.1
ALTER TABLE BBB_CORE.BBB_REG_RECOMM_PRODUCTS ADD LTL_ASSEMBLY_SELECTED VARCHAR2(10);

--Sprint 6.1
ALTER TABLE BBB_CORE.BBB_ITEM ADD ORIG_LTL_SHIP_METHOD varchar(10);
--Sprint 7.1  and build 8 10th nov

ALTER TABLE BBB_CORE.BBB_REGISTRY
  ADD REGISTRANT_BG VARCHAR2(2);
  
ALTER TABLE BBB_CORE.BBB_REGISTRY
  ADD COREGISTRANT_BG VARCHAR2(2);
  
  
 --Sprint 9.2
CREATE TABLE BBB_CORE.BBB_STORE_LOCAL_INVENTORY
(
    STORE_ID         VARCHAR2(40) NOT NULL ENABLE,
    SKU_ID           VARCHAR2(40) NOT NULL ENABLE,
	STOCK_LEVEL      NUMBER(38),
    STORE_LIST_PRICE NUMBER(19,7),
    LAST_MODIFIED_DATE TIMESTAMP(6),
 CONSTRAINT  PK_BBB_LOCAL_INVENTRY  PRIMARY KEY (STORE_ID,SKU_ID)
);

CREATE TABLE BBB_CORE.BBB_REPO_INVALIDATE_SCHEDULE 
(
  ID					VARCHAR2(40) NOT NULL ENABLE, 
  PROCESS_NAME		VARCHAR2(150) ,
  LAST_MODIFIED_DATE	TIMESTAMP(6),
  READY_TO_INVALIDATE NUMBER(1, 0),
  CONSTRAINT PK_BBB_REPO_INVALD_SCHED PRIMARY KEY (ID)
);
 --Sprint 10.1  
ALTER TABLE BBB_CORE.DPS_USER_ADDRESS ADD MAILING_ADDR_ID VARCHAR2(40);

 --Sprint 10.2  
CREATE TABLE BBB_CORE.OMNITURE_REPORT_STATUS
  (
    ID                     VARCHAR2(40 BYTE) NOT NULL ENABLE,
    REPORT_ID              VARCHAR2(40 BYTE) NOT NULL ENABLE,
    METHOD_TYPE            VARCHAR2(10 BYTE),
    CONCEPT                VARCHAR2(20 BYTE),
    QUEUED_DATE            DATE,
    REPORT_GET_TIME_FIRST  TIMESTAMP,
    REPORT_GET_TIME_SECOND TIMESTAMP,
    REPORT_EXEC_TIME FLOAT(126),
    REPORT_PROC_FINISH_TIME FLOAT(126),
    REPORT_OP_STATUS  VARCHAR2(20 BYTE),
    ERROR_CODE        VARCHAR2(100 BYTE),
    ERROR_DESCRIPTION VARCHAR2(500 BYTE),
    CONSTRAINT PK_OMNITURE_REPORT_STATUS PRIMARY KEY (ID)
  );
  
  CREATE TABLE BBB_CORE.BBB_OMNITURE_REPORT_DATA
  (
    ID           NUMBER,
    REPORT_ID    VARCHAR2(40 BYTE) NOT NULL ENABLE,
    REPORT_TYPE  VARCHAR2(40 BYTE),
    REPORT_SUITE VARCHAR2(40 BYTE),
    PERIOD       VARCHAR2(100 BYTE),
    CONCEPT      VARCHAR2(15 BYTE),
    BOOST_SCORE FLOAT(126),
    PRODUCT_ID VARCHAR2(40 BYTE),
    KEYWORD    VARCHAR2(256 BYTE),
    CONSTRAINT BBB_OMNITURE_REPORT_DATA_PK PRIMARY KEY (ID)
  );
  
CREATE SEQUENCE BBB_CORE.OMNITURE_BOOSTING_SEQ MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 100 NOORDER NOCYCLE ;

 --Sprint 11.1 BBB_CUSTOMIZATION_VENDORS moved in Sprint 11.2

  
  --Sprint 11.2
  
  CREATE TABLE BBB_CORE.OMNITURE_ARCHIVED_DATA
  (
    ID           NUMBER,
    REPORT_ID    VARCHAR2(40) NOT NULL ENABLE,
    REPORT_TYPE  VARCHAR2(40),
    REPORT_SUITE VARCHAR2(40),
    PERIOD       VARCHAR2(100),
    CONCEPT      VARCHAR2(15),
    BOOST_SCORE FLOAT(126),
    PRODUCT_ID VARCHAR2(40),
    KEYWORD    VARCHAR2(256),
    ARCHIVED_DATE DATE DEFAULT SYSDATE,
    CONSTRAINT OMNITURE_ARCHIVED_DATA_PK PRIMARY KEY (ID) ENABLE
 );
 
CREATE TABLE BBB_CORE.BBB_EXCLUSION_TEXT(
	ENTRY_CD 	VARCHAR2(40) NOT NULL,
	SITE_ID VARCHAR2(40) NOT NULL,
    EXCLUSION_TEXT 	VARCHAR2(4000),
	CONSTRAINT PK_BBB_EXCLUSION_TEXT PRIMARY KEY(ENTRY_CD,SITE_ID)
);

ALTER TABLE BBB_CORE.BBB_COUPON_RULES ADD SITE_ID VARCHAR2(40);

ALTER TABLE BBB_CORE.BBB_CUSTOMIZATION_VENDORS
ADD (BAB_CLIENT_ID varchar2(100),
 BBB_CLIENT_ID varchar2(100),
  CAN_CLIENT_ID varchar2(100),
  TBS_BBB_CLIENT_ID varchar2(100),
  TBS_BAB_CLIENT_ID varchar2(100),
  TBS_CAN_CLIENT_ID varchar2(100),
  API_URL varchar2(100),
  API_VERSION varchar2(100),
  API_KEY varchar2(100));
  

--Sprint 14.1
CREATE TABLE BBB_CORE.BBB_DUMMY_STORES
   (	
    ID NUMBER(38,0), 
	SITE_ID VARCHAR2(30), 
	DUMMY_STORE_ID VARCHAR2(30), 
	ORIG_STORE_ID VARCHAR2(30),
  CONSTRAINT PK_BBB_DUMMY_STORES PRIMARY KEY (ID)
   );
   
   
--Sprint 16.2

CREATE TABLE BBB_CORE.BBB_CUSTOMER_PROFILE
  (
     EMAIL_ADDR VARCHAR2(256) NOT NULL,
     ATG_PROFILE_ID VARCHAR2(40) NOT NULL,
     PROFILE_DATA_NAME_VALUE_PAIRS          CLOB,
     LAST_MODIFIED_DATE TIMESTAMP (6),
     CONSTRAINT BBB_CUSTOMER_PROFILE_PK PRIMARY KEY (EMAIL_ADDR) 
  ); 

 --Sprint 18.5

CREATE TABLE BBB_CORE.BBB_USER_CHALLENGE_QUESTION (
	PROFILE_ID		varchar2(40)	NOT NULL,
	CHALLENGE_QUESTION1 	varchar2(254)	NULL,
	CHALLENGE_QUESTION2 	varchar2(254)	NULL,
	CHALLENGE_ANSWER1 	varchar2(254)	NULL,
	CHALLENGE_ANSWER2 	varchar2(254)	NULL,
	CONSTRAINT PK_BBB_USER_CHALLENGE_QUESTION PRIMARY KEY(PROFILE_ID)
); 

-- Sprint 19.1

CREATE TABLE BBB_CORE.BBB_STORE_LOCAL_INVENTORY_WEB
(
    STORE_ID         VARCHAR2(40) NOT NULL ENABLE,
    SKU_ID           VARCHAR2(40) NOT NULL ENABLE,
	STOCK_LEVEL      NUMBER(38),
    STORE_LIST_PRICE NUMBER(19,7),
    LAST_MODIFIED_DATE TIMESTAMP(6),
 CONSTRAINT  PK_BBB_LOCAL_INVENTRY_WEB  PRIMARY KEY (STORE_ID,SKU_ID)
);

 COMMIT;
