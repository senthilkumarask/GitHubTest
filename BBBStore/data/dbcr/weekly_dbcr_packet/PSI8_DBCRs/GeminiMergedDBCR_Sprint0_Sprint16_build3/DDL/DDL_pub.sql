-- Build Version : PSI8 Release Sprint 0 to 12.1
SET ECHO ON;
SET DEFINE OFF;

--Sprint 1.1
ALTER TABLE BBB_PUB.BBB_BCC_CATEGORIES ADD PROMO_CONTAINER_ID varchar2(252);
-- In Sprint 16.1 column PROMO_BOX_TEMPLATE updated 		
CREATE TABLE BBB_PUB.BBB_LAND_PBOX_TMPLATE(LANDING_TEMPLATE_ID VARCHAR2(40) NOT NULL,ASSET_VERSION NUMBER(38) NOT NULL, PROMO_BOX_CSS VARCHAR2(254),PROMO_BOX_JS VARCHAR2(254),PROMO_BOX_TEMPLATE CLOB);


--Sprint 3.2
CREATE INDEX BBB_PUB.IDX_BRAND_NAME ON BBB_PUB.BBB_BRANDS (BRAND_NAME);

--Sprint 5.2

CREATE TABLE BBB_PUB.BBB_REG_INPUTLIST
   (	ID VARCHAR2(40 BYTE) NOT NULL ENABLE, 
	REG_INPUTLIST_ID VARCHAR2(40 BYTE), 
	ASSET_VERSION NUMBER(*,0) NOT NULL ENABLE, 
	 CONSTRAINT PK_BBB_REG_INPUTLIST PRIMARY KEY (ID, REG_INPUTLIST_ID, ASSET_VERSION)
);
CREATE TABLE BBB_PUB.BBB_REG_INPUT
   (	ID VARCHAR2(40 BYTE) NOT NULL ENABLE, 
	FIELD_NAME NUMBER(*,0), 
	DISPLAY_ON_FORM NUMBER(1,0),
	REQUIRED_INPUT_CREATE NUMBER(1,0),
	REQUIRED_INPUT_UPDATE NUMBER(1,0),
	REQUIRED_FOR_PUBLIC NUMBER(1,0),
	ASSET_VERSION NUMBER(*,0) NOT NULL ENABLE, 
	WORKSPACE_ID VARCHAR2(254 BYTE) NOT NULL ENABLE, 
	BRANCH_ID VARCHAR2(254 BYTE) NOT NULL ENABLE, 
	IS_HEAD NUMBER(1,0) NOT NULL ENABLE, 
	VERSION_DELETED NUMBER(1,0) NOT NULL ENABLE, 
	VERSION_EDITABLE NUMBER(1,0) NOT NULL ENABLE, 
	PRED_VERSION NUMBER(*,0), 
	CHECKIN_DATE TIMESTAMP (6),
 CONSTRAINT PK_BBB_REG_INPUT PRIMARY KEY (ID,ASSET_VERSION)
);


--Sprint 6.1
CREATE TABLE BBB_PUB.BBB_REGINPUTS_BY_REGTYPE
   (	ID VARCHAR2(40 BYTE) NOT NULL ENABLE, 
	EVENT_TYPE VARCHAR2(254 BYTE) NOT NULL ENABLE, 
	ISPUBLIC NUMBER(1,0),
	ASSET_VERSION NUMBER(*,0) NOT NULL ENABLE, 
	WORKSPACE_ID VARCHAR2(254 BYTE) NOT NULL ENABLE, 
	BRANCH_ID VARCHAR2(254 BYTE) NOT NULL ENABLE,
	IS_HEAD NUMBER(1,0) NOT NULL ENABLE,
	VERSION_DELETED NUMBER(1,0) NOT NULL ENABLE, 
	VERSION_EDITABLE NUMBER(1,0) NOT NULL ENABLE, 
	PRED_VERSION NUMBER(*,0), 
	CHECKIN_DATE TIMESTAMP (6),
CONSTRAINT PK_BBB_REGINPUTS_BY_REGTYPE PRIMARY KEY (ID, ASSET_VERSION)
);


--Sprint 11.2


ALTER TABLE BBB_PUB.BBB_SKU ADD (
   WEB_SKU_STATUS_CD char (1 char) NULL,
   CA_CHAIN_SKU_STATUS_CD char (1 char) NULL,
   CA_WEB_SKU_STATUS_CD char (1 char) NULL,
   CHAIN_SKU_STATUS_CD char (1 char) NULL
);

CREATE TABLE BBB_PUB.BBB_SCHOOL_PROMO_CONTAINER
(
SCHOOL_PROMO_CONTAINER_ID VARCHAR2(254),
HTML_SNIPPET CLOB,
JS_FILE_PATH VARCHAR2(512),
CSS_FILE_PATH VARCHAR2(512),
ASSET_VERSION NUMBER(*,0) NOT NULL ENABLE, 
WORKSPACE_ID VARCHAR2(254) NOT NULL ENABLE, 
BRANCH_ID VARCHAR2(254) NOT NULL ENABLE,
IS_HEAD NUMBER(1,0) NOT NULL ENABLE,
VERSION_DELETED NUMBER(1,0) NOT NULL ENABLE, 
VERSION_EDITABLE NUMBER(1,0) NOT NULL ENABLE, 
PRED_VERSION NUMBER(*,0), 
CHECKIN_DATE TIMESTAMP (6),
CONSTRAINT PK_BBB_SCHOOL_PROMO_CONTAINER PRIMARY KEY (SCHOOL_PROMO_CONTAINER_ID, ASSET_VERSION)
);

ALTER TABLE BBB_PUB.BBB_SCHOOLS_VER ADD SCHOOL_PROMO_CONTAINER_ID VARCHAR2(254);


ALTER TABLE BBB_PUB.BBB_SEO_TRANSLATION
ADD CHANNEL_ID varchar2(100) default 'DesktopWeb';

 -- Sprint 14.1


CREATE TABLE BBB_PUB.BBB_CHALLENGE_QUESTIONS
  (
    CHALLENGE_QUESTION_ID VARCHAR2(254 BYTE) NOT NULL ENABLE,
    QUESTION_TYPE         NUMBER(*,0),
    CHALLENGE_QUESTION    VARCHAR2(254 BYTE),
    ASSET_VERSION         NUMBER(*,0) NOT NULL ENABLE,
    WORKSPACE_ID          VARCHAR2(254 BYTE) NOT NULL ENABLE,
    BRANCH_ID             VARCHAR2(254 BYTE) NOT NULL ENABLE,
    IS_HEAD               NUMBER(1,0) NOT NULL ENABLE,
    VERSION_DELETED       NUMBER(1,0) NOT NULL ENABLE,
    VERSION_EDITABLE      NUMBER(1,0) NOT NULL ENABLE,
    PRED_VERSION          NUMBER(*,0),
    CHECKIN_DATE TIMESTAMP (6),
    PRIMARY KEY (CHALLENGE_QUESTION_ID, ASSET_VERSION)
  );
-- Sprint 16.2 
CREATE TABLE BBB_PUB.BBB_EDW_ATTRIBUTES
  ( 
    EDW_ID         VARCHAR2(40 BYTE) NOT NULL,
    EDW_KEY               VARCHAR2(40 BYTE) NOT NULL,
    SEND_TO_SITESPECT       NUMBER(1,0),
    SEND_TO_TIBCO          NUMBER(1,0),
    ASSET_VERSION         NUMBER(*,0) NOT NULL,
    WORKSPACE_ID          VARCHAR2(254 BYTE) NOT NULL,
    BRANCH_ID             VARCHAR2(254 BYTE) NOT NULL,
    IS_HEAD               NUMBER(1,0) NOT NULL,
    VERSION_DELETED       NUMBER(1,0) NOT NULL,
    VERSION_EDITABLE      NUMBER(1,0) NOT NULL,
    PRED_VERSION          NUMBER(*,0),
    CHECKIN_DATE TIMESTAMP (6),
    CONSTRAINT PK_BBB_EDW_ATTRIBUTES PRIMARY KEY (EDW_ID,ASSET_VERSION) 
  );

COMMIT;