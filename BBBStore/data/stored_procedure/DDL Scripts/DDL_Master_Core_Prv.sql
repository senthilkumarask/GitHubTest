SET DEFINE OFF;

ALTER TABLE BBB_CORE_PRV.BBB_ITEM ADD PREV_PRICE NUMBER(19,7);
ALTER TABLE BBB_CORE_PRV.BBB_ITEM ADD (MSG_SHOWN_OOS VARCHAR2(256));

ALTER TABLE BBB_CORE_PRV.BBB_SKU ADD (COST NUMBER(19,7));
ALTER TABLE BBB_CORE_PRV.BBB_SKU_TRANSLATIONS ADD ATTRIBUTE_VALUE_DATE TIMESTAMP;
ALTER TABLE BBB_CORE_PRV.BBB_PROD_TRANSLATIONS ADD ATTRIBUTE_VALUE_DATE TIMESTAMP;

ALTER TABLE BBB_CORE_PRV.BBB_PRODUCT ADD MARGIN VARCHAR2(40);
ALTER TABLE BBB_CORE_PRV.BBB_PRODUCT ADD PRIMARY_NODE_ID_DEFAULT VARCHAR2(24);

CREATE TABLE BBB_CORE_PRV.BBB_GIFT_ITEM_EXT_DATA (
	ID VARCHAR2(40 BYTE), 
	PREV_PRICE NUMBER(19,7), 
	REGISTRY_ID VARCHAR2(254 BYTE),
	MSG_SHOWN_OOS VARCHAR2(256)
);


CREATE TABLE BBB_CORE_PRV.BBB_SORTING_OPTIONS (
	SORTING_OPTION_ID 	VARCHAR2(254)	NOT NULL,
	SORTING_CODE 		VARCHAR2(254)	NULL,
	SORTING_VALUE 		VARCHAR2(254)	NULL,
	SORTING_ORDER 		INTEGER	NULL,
	LAST_MOD_DATE 		DATE	NULL,
	PRIMARY KEY(SORTING_OPTION_ID) USING INDEX TABLESPACE INDX01
);


CREATE TABLE BBB_CORE_PRV.BBB_BCC_CATEGORIES (
	ID 			VARCHAR2(254)	NOT NULL,
	CATEGORY_ID 		VARCHAR2(254)	NULL REFERENCES BBB_CORE_PRV.DCS_CATEGORY(CATEGORY_ID),
	CHAT_ENABLE 		NUMBER(1)	NULL,
	CHAT_URL 		VARCHAR2(254)	NULL,
	CHAT_CODE 		VARCHAR2(254)	NULL,
	CHAT_LINK_PLACEHOLDER 	INTEGER	NULL,
	DEFAULT_SORTING_OPTION 	VARCHAR2(254)	NULL REFERENCES BBB_CORE_PRV.BBB_SORTING_OPTIONS(SORTING_OPTION_ID),
	CHECK (CHAT_ENABLE IN (0, 1)),
	PRIMARY KEY(ID) USING INDEX TABLESPACE INDX01
);

ALTER TABLE BBB_CORE_PRV.BBB_BCC_CATEGORIES ADD (DISPLAY_ASK_AND_ANSWER NUMBER(5,0));
ALTER TABLE BBB_CORE_PRV.BBB_BCC_CATEGORIES ADD LAST_MODIFIED_DATE TIMESTAMP NULL;

CREATE TABLE BBB_CORE_PRV.BBB_SALES_DATA (
	ID VARCHAR(40),
	PRODUCT_ID VARCHAR2(54),
	SITE_ID VARCHAR2(54),
	UNIT_SALES VARCHAR2(54),
	ORDER_SALES VARCHAR2(54),
	TOTAL_SALES VARCHAR2(54),
	COLLECTION_FLAG NUMBER(1) DEFAULT '0',
	LAST_MOD_DATE TIMESTAMP(6),
	CONSTRAINT BBB_SALES_DATA_PK PRIMARY KEY (PRODUCT_ID, SITE_ID) USING INDEX TABLESPACE INDX01
);

ALTER TABLE BBB_CORE_PRV.BBB_CHAT_ATTRIBUTES ADD CHAT_LINK_PLACEHOLDER  NUMBER(1,0);
	
	
ALTER TABLE BBB_CORE_PRV.BBB_COUPON_RULES ADD (JDA_SUB_DEPT_ID VARCHAR2(40 BYTE),JDA_CLASS VARCHAR2(40 BYTE));



CREATE TABLE BBB_CORE_PRV.BBB_CREDIT_CARD_COUNTRY (
	ID VARCHAR2(254 BYTE), 
	COUNTRY_NAME VARCHAR2(254 BYTE) NOT NULL, 
	COUNTRY_CODE VARCHAR2(254 BYTE) NOT NULL,
	PRIMARY KEY (ID) USING INDEX TABLESPACE INDX01
);

ALTER TABLE BBB_CORE_PRV.BBB_ADDRESS MODIFY (MOBILE_NUMBER VARCHAR2(254 BYTE));
ALTER TABLE BBB_CORE_PRV.BBB_ADDRESS MODIFY (PHONE_NUMBER VARCHAR2(254 BYTE));

ALTER TABLE BBB_CORE_PRV.BBB_CHAT_ATTRIBUTES ADD (CHAT_FLAG_PDP NUMBER(1,0),CHAT_OVERRIDE_FLAG_PDP NUMBER(1,0), DAAS_FLAG_PDP NUMBER(1,0), DAAS_OVERRIDE_FLAG_PDP NUMBER(1,0));

ALTER TABLE BBB_CORE_PRV.BBB_ADDRESS ADD (COUNTRY_NAME VARCHAR2(254));

CREATE TABLE BBB_CORE_PRV.BBB_FEED_SCHEDULER (
	FEED_KEY_ID VARCHAR2(54),
	FEED_TYPE_DESC VARCHAR2(54),
	FEED_TYPE VARCHAR2(54),
	PRIMARY KEY (FEED_KEY_ID) USING INDEX TABLESPACE INDX01
 );

CREATE TABLE BBB_CORE_PRV.BBB_FEED_SCHEDULER_KEYS (
	FEED_KEY_ID VARCHAR2(54),
	FEED_KEY VARCHAR2(54),
	FEED_SCHEDULER_VALUE VARCHAR2 (54),
	PRIMARY KEY (FEED_KEY_ID,FEED_KEY) USING INDEX TABLESPACE INDX01,
	FOREIGN KEY (FEED_KEY_ID) REFERENCES BBB_CORE_PRV.BBB_FEED_SCHEDULER(FEED_KEY_ID) 
);


CREATE TABLE BBB_CORE_PRV.BBB_PURGE_SCHEDULER (
	PURGE_ID 			VARCHAR2(5) NOT NULL ,
	PURGE_TYPE 			VARCHAR2(50) NOT NULL , 
	DESCRIPTION 		VARCHAR2(50) NOT NULL , 
	REPOSITORY 			VARCHAR2(50) NOT NULL , 
	ITEM_DESCRIPTOR 	VARCHAR2(50) NOT NULL , 
	LAST_MODIFIED_DATE 	TIMESTAMP , 
	INTERVAL_IN_DAYS 	INTEGER NOT NULL,
	CONSTRAINT BBB_PURGE_SCHEDULER_PK PRIMARY KEY(PURGE_ID) USING INDEX TABLESPACE INDX01
);

CREATE TABLE BBB_CORE_PRV.BBB_PURGE_PARAM (
	PURGE_ID 	VARCHAR2(5) NOT NULL REFERENCES BBB_CORE_PRV.BBB_PURGE_SCHEDULER(PURGE_ID), 
	KEY_PARAM 	VARCHAR2(40) NOT NULL, 
	VALUE_PARAM	VARCHAR2(50),
	PRIMARY KEY (PURGE_ID,KEY_PARAM) USING INDEX TABLESPACE INDX01
);

CREATE TABLE BBB_CORE_PRV.BBB_EMAIL_PERSIST (
	EMAIL_ID 			VARCHAR2(256) NOT NULL ,
	EMAIL_MESSAGE       CLOB NOT NULL ,
	EMAIL_TYPE          VARCHAR2(40) NOT NULL ,
	EMAIL_DATE          TIMESTAMP NOT NULL ,
	SITE_ID             VARCHAR2(40),
	PRIMARY KEY(EMAIL_ID) USING INDEX TABLESPACE INDX01
);

CREATE TABLE BBB_CORE_PRV.BBB_BOPUS_EXCLUDED_STATES_LIST (
        ID                     		VARCHAR2(254)   NOT NULL REFERENCES BBB_CORE_PRV.SITE_CONFIGURATION(ID),
        BOPUS_EXCLUDED_STATE_ID       VARCHAR2(254)   NOT NULL REFERENCES BBB_CORE_PRV.BBB_STATES(STATE_ID),
        PRIMARY KEY(ID, BOPUS_EXCLUDED_STATE_ID) USING INDEX TABLESPACE INDX01
);


CREATE TABLE BBB_CORE_PRV.BBB_SITE_ATTRVAL_LIST(
    ID       	VARCHAR2(40 BYTE) NOT NULL REFERENCES BBB_CORE_PRV.BBB_SITE_ATTRIBUTES(ID),
    ATTR_VAL_ID VARCHAR2(20 BYTE) NOT NULL REFERENCES BBB_CORE_PRV.BBB_SKU_ATTRIBUTES_INFO(SKU_ATTRIBUTE_ID),
    CONSTRAINT BBB_SITE_ATTRVAL_LIST_PK PRIMARY KEY (ID, ATTR_VAL_ID) USING INDEX TABLESPACE INDX01
);

CREATE TABLE BBB_CORE_PRV.CAT_PRODUCT_SEQ (
CATEGORY_ID VARCHAR(32) NOT NULL REFERENCES BBB_CORE_PRV.BBB_CATEGORY(CATEGORY_ID),
CHILD_PRD_ID VARCHAR(32) NOT NULL,
SEQUENCE_NUM VARCHAR(32) NULL,
CONSTRAINT CAT_PRODUCT_SEQ_PK PRIMARY KEY(CATEGORY_ID, CHILD_PRD_ID) USING INDEX TABLESPACE INDX01
);


CREATE TABLE BBB_CORE_PRV.BBB_OMINITURE_REGISTRY_DATA
(
  REGISTRY_TEMPLATE_ID  VARCHAR2(40 BYTE) NOT NULL REFERENCES BBB_CORE_PRV.BBB_REGISTRY_TEMPLATE(REGISTRY_TEMPLATE_ID),
  OMNITURE_KEY          VARCHAR2(32 BYTE) NOT NULL,
  OMNITURE_VALUE        VARCHAR2(100 BYTE),
PRIMARY KEY(REGISTRY_TEMPLATE_ID, OMNITURE_KEY) USING INDEX TABLESPACE INDX01
);

CREATE TABLE BBB_CORE_PRV.BBB_OMINITURE_STATIC_DATA
(
  STATIC_TEMPLATE_ID VARCHAR2(254 BYTE)   NOT NULL REFERENCES BBB_CORE_PRV.BBB_STATIC_TEMPLATE (STATIC_TEMPLATE_ID),
  OMNITURE_KEY       VARCHAR2(32 BYTE)    NOT NULL,
  OMNITURE_VALUE     VARCHAR2(100 BYTE),
PRIMARY KEY(STATIC_TEMPLATE_ID, OMNITURE_KEY) USING INDEX TABLESPACE INDX01
);

CREATE TABLE BBB_CORE_PRV.BBB_OMINITURE_WSSTATIC_DATA (
  STATIC_TEMPLATE_ID VARCHAR2(254 BYTE)   NOT NULL REFERENCES BBB_CORE_PRV.BBB_WS_ST_CONTENT (STATIC_TEMPLATE_ID),
  OMNITURE_KEY       VARCHAR2(32 BYTE)    NOT NULL,
  OMNITURE_VALUE     VARCHAR2(100 BYTE),
PRIMARY KEY(STATIC_TEMPLATE_ID, OMNITURE_KEY) USING INDEX TABLESPACE INDX01
);

CREATE TABLE BBB_CORE_PRV.BBB_OMINITURE_GUIDES_DATA (
  GUIDES_ID          VARCHAR2(254 BYTE)   NOT NULL REFERENCES BBB_CORE_PRV.BBB_GUIDES (GUIDES_ID),
  OMNITURE_KEY       VARCHAR2(32 BYTE)    NOT NULL,
  OMNITURE_VALUE     VARCHAR2(100 BYTE),
PRIMARY KEY(GUIDES_ID, OMNITURE_KEY) USING INDEX TABLESPACE INDX01
);

CREATE TABLE BBB_CORE_PRV.BBB_PAGETABS_TEMPLATE (
	PAGETABS_ID 	VARCHAR2(254)	NOT NULL,
	PAGE_NAME 		INTEGER	NOT NULL,
	CONSTRAINT BBB_PAGETABS_TEMPLATE_PK PRIMARY KEY(PAGETABS_ID) USING INDEX TABLESPACE INDX01
);

CREATE TABLE BBB_CORE_PRV.BBB_PT_TABS_LIST (
	PAGETABS_ID 		VARCHAR2(254)	NOT NULL REFERENCES BBB_CORE_PRV.BBB_PAGETABS_TEMPLATE(PAGETABS_ID),
	SEQUENCE_NUM 		INTEGER	NOT NULL,
	TAB_DETAILS_ID 		VARCHAR2(20)	NULL,
	CONSTRAINT BBB_PT_TABS_LIST_PK PRIMARY KEY(PAGETABS_ID, SEQUENCE_NUM) USING INDEX TABLESPACE INDX01
);

CREATE TABLE BBB_CORE_PRV.BBB_TABS_DETAIL (
	TAB_ID 		VARCHAR2(254)	NOT NULL,
	TAB_NAME	NUMBER(1) 	NULL,
	CONSTRAINT BBB_TABS_DETAIL_PK PRIMARY KEY(TAB_ID) USING INDEX TABLESPACE INDX01
);

ALTER TABLE BBB_CORE_PRV.BBB_LANDING_CATEGORY ADD SEO_STATIC_TEXT VARCHAR(1000);

CREATE TABLE BBB_CORE_PRV.BBB_SMLR_PRD_IGN_LIST(
	ID 			VARCHAR2(40)	NOT NULL,
	CATEGORY_ID 		VARCHAR2(80)	NOT NULL,
	CONSTRAINT BBB_SMLR_PRD_IGN_LIST_PK PRIMARY KEY(ID, CATEGORY_ID) USING INDEX TABLESPACE INDX01
);

ALTER TABLE BBB_CORE_PRV.BBB_SITE_ATTRIBUTES ADD SORT_OPTION VARCHAR2(254);

CREATE TABLE BBB_CORE_PRV.BBB_SORT_OPTION_LIST (
ID VARCHAR2(254) NOT NULL,
SORTING_OPTION_ID	VARCHAR2(254) NOT NULL,
PRIMARY KEY(ID, SORTING_OPTION_ID) USING INDEX TABLESPACE INDX01,
FOREIGN KEY (ID) REFERENCES BBB_CORE_PRV.BBB_SITE_ATTRIBUTES(ID),
FOREIGN KEY (SORTING_OPTION_ID) REFERENCES BBB_CORE_PRV.BBB_SORTING_OPTIONS(SORTING_OPTION_ID)
);


CREATE TABLE BBB_CORE_PRV.BBB_CAT_SORT_OPT (
	ID 			VARCHAR2(254)	NOT NULL REFERENCES BBB_CORE_PRV.BBB_BCC_CATEGORIES(ID),
	SORTING_OPTION_ID 	VARCHAR2(254)	NOT NULL REFERENCES BBB_CORE_PRV.BBB_SORTING_OPTIONS(SORTING_OPTION_ID),
	PRIMARY KEY(ID, SORTING_OPTION_ID) USING INDEX TABLESPACE INDX01
);

ALTER TABLE BBB_CORE_PRV.BBB_STATES ADD IS_MILITARY_STATE NUMBER(1,0) DEFAULT 0;

ALTER TABLE BBB_CORE_PRV.BBB_SCHOOLS_VER MODIFY SMALL_WELCOME_MSG VARCHAR2(2000);
ALTER TABLE BBB_CORE_PRV.BBB_SCHOOLS_VER MODIFY LARGE_WELCOME_MSG VARCHAR2(2000);
ALTER TABLE BBB_CORE_PRV.BBB_EMAIL_TEMPLATE ADD (EMAIL_FLAG VARCHAR2(5));
ALTER TABLE BBB_CORE_PRV.BBB_EMAIL_TRANSLATIONS ADD (EMAIL_FLAG VARCHAR2(5));
ALTER TABLE BBB_CORE_PRV.BBB_SORTING_OPTIONS ADD SORTING_URL_PARAM VARCHAR2(254);
ALTER TABLE BBB_CORE_PRV.BBB_STATIC_TEMPLATE ADD PARENT_PAGE_ID VARCHAR2(254BYTE); 
COMMIT;