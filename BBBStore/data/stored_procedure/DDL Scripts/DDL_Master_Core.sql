SET DEFINE OFF;

CREATE TABLE BBB_CORE.BBB_SALES_DATA (
	ID VARCHAR(40),
	PRODUCT_ID VARCHAR2(54),
	SITE_ID VARCHAR2(54),
	UNIT_SALES VARCHAR2(54),
	ORDER_SALES VARCHAR2(54),
	TOTAL_SALES VARCHAR2(54),
	COLLECTION_FLAG NUMBER(1) DEFAULT '0',
	LAST_MOD_DATE TIMESTAMP(6),
	CONSTRAINT BBB_SALES_DATA_PK PRIMARY KEY (PRODUCT_ID, SITE_ID) USING INDEX TABLESPACE INDX01
);


GRANT DELETE, INSERT, SELECT, UPDATE ON BBB_CORE.BBB_SALES_DATA TO BBB_SWITCH_A;
GRANT DELETE, INSERT, SELECT, UPDATE ON BBB_CORE.BBB_SALES_DATA TO BBB_SWITCH_B;
GRANT DELETE, INSERT, SELECT, UPDATE ON BBB_CORE.BBB_SALES_DATA TO BBB_CORE_PRV;

CREATE TABLE BBB_CORE.BBB_FEED_SCHEDULER (
	FEED_KEY_ID VARCHAR2(54),
	FEED_TYPE_DESC VARCHAR2(54),
	FEED_TYPE VARCHAR2(54),
	PRIMARY KEY (FEED_KEY_ID) USING INDEX TABLESPACE INDX01
 );

CREATE TABLE BBB_CORE.BBB_FEED_SCHEDULER_KEYS (
	FEED_KEY_ID VARCHAR2(54),
	FEED_KEY VARCHAR2(54),
	FEED_SCHEDULER_VALUE VARCHAR2 (54),
	PRIMARY KEY (FEED_KEY_ID,FEED_KEY) USING INDEX TABLESPACE INDX01,
	FOREIGN KEY (FEED_KEY_ID) REFERENCES BBB_CORE.BBB_FEED_SCHEDULER(FEED_KEY_ID) 
);

ALTER TABLE BBB_CORE.BBB_ITEM ADD PREV_PRICE NUMBER(19,7);
ALTER TABLE BBB_CORE.BBB_ITEM ADD (MSG_SHOWN_OOS VARCHAR2(256));

CREATE TABLE BBB_CORE.BBB_GIFT_ITEM_EXT_DATA (
	ID VARCHAR2(40 BYTE), 
	PREV_PRICE NUMBER(19,7), 
	REGISTRY_ID VARCHAR2(254 BYTE),
	MSG_SHOWN_OOS VARCHAR2(256)
);

CREATE TABLE BBB_CORE.BBB_PURGE_SCHEDULER (
	PURGE_ID 			VARCHAR2(5) NOT NULL ,
	PURGE_TYPE 			VARCHAR2(50) NOT NULL , 
	DESCRIPTION 		VARCHAR2(50) NOT NULL , 
	REPOSITORY 			VARCHAR2(50) NOT NULL , 
	ITEM_DESCRIPTOR 	VARCHAR2(50) NOT NULL , 
	LAST_MODIFIED_DATE 	TIMESTAMP , 
	INTERVAL_IN_DAYS 	INTEGER NOT NULL,
	CONSTRAINT BBB_PURGE_SCHEDULER_PK PRIMARY KEY(PURGE_ID) USING INDEX TABLESPACE INDX01
);

CREATE TABLE BBB_CORE.BBB_PURGE_PARAM (
	PURGE_ID 	VARCHAR2(5) NOT NULL REFERENCES BBB_CORE.BBB_PURGE_SCHEDULER(PURGE_ID), 
	KEY_PARAM 	VARCHAR2(40) NOT NULL, 
	VALUE_PARAM	VARCHAR2(50),
	PRIMARY KEY (PURGE_ID,KEY_PARAM) USING INDEX TABLESPACE INDX01
);

CREATE TABLE BBB_CORE.BBB_EMAIL_PERSIST (
	EMAIL_ID 			VARCHAR2(256) NOT NULL ,
	EMAIL_MESSAGE       CLOB NOT NULL ,
	EMAIL_TYPE          VARCHAR2(40) NOT NULL ,
	EMAIL_DATE          TIMESTAMP NOT NULL ,
	SITE_ID             VARCHAR2(40),
	PRIMARY KEY(EMAIL_ID) USING INDEX TABLESPACE INDX01
);

ALTER TABLE BBB_CORE.BBB_COUPON_RULES ADD (JDA_SUB_DEPT_ID VARCHAR2(40 BYTE),JDA_CLASS VARCHAR2(40 BYTE));

CREATE TABLE BBB_CORE.BBB_CREDIT_CARD_COUNTRY (
	ID VARCHAR2(254 BYTE), 
	COUNTRY_NAME VARCHAR2(254 BYTE) NOT NULL, 
	COUNTRY_CODE VARCHAR2(254 BYTE) NOT NULL,
	PRIMARY KEY (ID) USING INDEX TABLESPACE INDX01
);

ALTER TABLE BBB_CORE.BBB_ADDRESS MODIFY (MOBILE_NUMBER VARCHAR2(254 BYTE));
ALTER TABLE BBB_CORE.BBB_ADDRESS MODIFY (PHONE_NUMBER VARCHAR2(254 BYTE));
ALTER TABLE BBB_CORE.BBB_ADDRESS ADD (COUNTRY_NAME VARCHAR2(254));

COMMIT;